<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home</title>
    <style type="text/css">
      body{
        background-color: beige;
        text-align: center;
        font-family: monospace;
      }
      fieldset{
        width: inherit;
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="AllLogin">
      <div class="login">
        <button onclick="login()">Log in</button>
        <button onclick="singUp()">Sing up</button>
      </div>
      <div id="LogIn" class="LogIn">
        <form method="post" action="/login">
          <fieldset>
            <legend>Login</legend>
            <label for="username"></label>
            <input type="text" name="username" placeholder="Gebruikersnaam"></input>
            <label for="password"></label>
            <input type="password" name="password" placeholder="Wachtwoord"></input>
            <input type="submit" value="Log in"></input>
          </fieldset>
        </form>
      </div>
      <div id="SingUp" class="SingUp">
        <form method="post" action="/welkom">
          <fieldset>
            <legend>Sing up</legend>
            <label for="newUsername"></label>
            <input type="text" name="newUsername" placeholder="Nieuwe gebruikersnaam"></input>
            <label for="newPassword"></label>
            <input type="password" name="newPassword" placeholder="Nieuw wachtwoord"></input>
            <input type="submit" value="Sing up"></input>
          </fieldset>
        </form>
      </div>
    </div>
      <a href="/"><button>Home</button></a>
      <a href="/bewerken"><button>Bewerkpagina</button></a>
      <a href="/preview"><button>Bekijkpagina</button></a>
      <a href="/help"><button>Help</button></a>
    </nav>
    <noscript>This site require JavaScript. Try in another browser like '<a href="https://www.google.nl/chrome/index.html">Chrome</a>'</noscript>
    <h1 id="title">Welkom op zelf-presentatie-maken.nl</h1>
    <br>
    <p id="p">De site om snel een presentatie in elkaar te flansen.
    <br>
    Er is een uitgebreide handleiding. <br>Als u tips heeft dan kunt u ze hieronder opgeven.</p>
    <a href="/help"><button id="handleiding">Handleiding voor beginners</button></a>
    <br>
    <a href="/bewerken"><button id="button1">Direct Starten</button></a>
    <h1>Reactie plaatsen</h1>
        <form action="/comments" method="post">
          <div class="contact">
          <fieldset>
            <legend>Reactie plaatsen</legend>
                <div class="inputLabel"><label for="name"><div class="label">Name:</div></label>
                <div class="input"><input width="auto" required type="text" id="name" name="name" placeholder="Naam" /></div></div>
                <br>
                <div class="inputLabel"><label for="email"><div class="label">Email:</div></label>
                <div class="input"><input width="auto" required type="email" name="email" id="email" placeholder="Email-adres" /></div></div>
                <br>
                <div class="inputLabel"><label for="message"><div class="label">Bericht:</div></label>
                <div class="input"><textarea width="auto" required name="comment" id="message" placeholder="Bericht"></textarea></div></div>
                <br>
                <div class="inputLabel"><div class="label"><label for="cijfer">Uw cijfer:</label></div>
                <div class="input"><input width="auto" required type="number" name="cijfer" id="rate" min="1.0" max="10.0" value="7"></div></div>
                <br>
                <input type="submit" value="Send message" />
              </div>
          </fieldset>
        </form>
    <p id="allComments">Er zijn nog geen reacties.</p>
    <script type="text/javascript">
    if (localStorage.getItem("geweest?") === "ja") {
      document.getElementById("handleiding").innerHTML = "Toch nog even vergeten?<br>Geen probleem. Klik voor de handleiding";
      document.getElementById("title").innerHTML = "Welkom terug.";
      document.getElementById("button1").innerHTML = "Ga verder waar u gebleven was";
      document.getElementById("p").innerHTML = "";
    } else {
      localStorage.setItem("geweest?", "ja");
    }

    function login() {
      document.getElementById("LogIn").style.display = "inline-block";
      document.getElementById("SingUp").style.display = "none";
    }

    function singUp() {
      document.getElementById("SingUp").style.display = "inline-block";
      document.getElementById("LogIn").style.display = "none";
    }

    fetch('/comments')
      .then(function(response) {
        return response.json();
      })
      .then(function(myJson) {
        console.log(myJson);
        let newCommentHTML = ''

        myJson.comments.forEach(function(comment){
          newCommentHTML = newCommentHTML + `
            <h4 class="commentname">${comment.name} geeft de site een ${comment.rate}.</h4>
            <p class="commentcomment">${comment.comment}</p>
            <a class="commentemail" href="mailto:${comment.email}"><button>Reageer met email</button></a>
          `
        })

        document.getElementById("allComments").innerHTML = newCommentHTML
      });
    </script>
    <style type="text/css">
      fieldset{
        display: inline-block;
        border: 5px solid (internal value);
      }
      .commentname{
        color: blue
      }
      .input {
        text-align: right;
      }
      .label{
        text-align: left;
      }
      /*.inputLabel{
        display: block;
      }*/
      .contact{
        display: inline-flex;
      }
      .login{
        text-align: right;
      }
      .LogIn{
        display: none;
      }
      .AllLogin{
        display: block;
        text-align: right;
      }
      .SingUp{
        display: none;
        text-align: right;
      }
    </style>
  </body>
</html>
